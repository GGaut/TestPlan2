# Тест план

## Цель: 
- Проверить корректность расчета стоимости продукта, обработку параметров, авторизацию и граничные случаи.

## Предусловия: 
- API запущен
- Есть тестовые продукты с известными productId = {id}.
- Есть валидные authToken = {token} (16 символов).

## Критерии завершения: 
- Все тесты выполнены и дают ожидаемые коды ответов.
- Критические баги исправлены и проверены повторно.
- Подготовлен отчёт.

## Критерии приёмки:
- **200** — корректный JSON для успешных запросов.
- **401/404/500** — правильные коды ошибок и информативные сообщения.
- `authToken` валидируется.


## Тест кейсы:

### Таблица принятия решений:

| Правило | Описание | Токен (16 симв) | Product ID | Start | Count | Ожидаемый результат (код / тело) |
|--------|----------|----------------|-----------|-------|-------|-----------------------------------|
| ТК1 | Базовый (1‑й товар) | Валид | Да | 0 | 1 | 200 OK / 30 RUB |
| ТК2 | Конец партии (5‑й товар) | Валид | Да | 4 | 1 | 200 OK / 10 RUB |
| ТК3 | Переход границы партии | Валид | Да | 4 | 2 | 200 OK / 40 RUB (10 + 30) |
| ТК4 | Полная партия | Валид | Да | 0 | 5 | 200 OK / 100 RUB |
| ТК5 | Несколько партий | Валид | Да | 0 | 6 | 200 OK / 130 RUB (100 + 30) |
| ТК6 | Ошибка авторизации | Невалид | Да | 0 | 1 | 401 Unauthorized |
| ТК7 | Продукт не найден | Валид | Нет | 0 | 1 | 404 Not Found |
| TK8 | Некорректные данные | Валид | Да | -1 | "start" | 500 / "errorMessage": "..." |


### Детализация тест-кейсов:



### ТК1: Расчет базовой стоимости

Шаги: Выполнить GET /products/{id}/cost?authToken={token}&count=1&start=0

Ожидаемый результат: Статус **200**, тело: {"cost": 30}.

### ТК2: Граничное значение внутри партии

Шаги: Выполнить запрос GET /products/{id}/cost?authToken={token}&count=1&start=4.

Ожидаемый результат: Статус **200**, тело: {"cost": 10}.

### ТК3: Переход через границу партии

Шаги: Выполнить запрос GET /products/{id}/cost?authToken={token}&count=2&start=4.

Ожидаемый результат: Статус **200**, тело: {"cost": 40} (10 за 5-й товар + 30 за 1-й следующей партии).

### ТК4: Расчет полной партии

Шаги: Выполнить запрос GET /products/{id}/cost?authToken={token}&count=0&start=5.

Ожидаемый результат: Статус **200**, тело: {"cost": 100}

### ТК5: Расчет нескольких партий

Шаги: Выполнить запрос GET /products/{id}/cost?authToken={token}&count=0&start=6.

Ожидаемый результат: Статус **200**, тело: {"cost": 130}

### ТК6: Невалидный authToken = {invaltoken}

Шаги: Выполнить GET /products/{id}/cost?authToken={invaltoken}&count=1&start=0

Ожидаемый результат: Статус **401** Unauthorized.


### TK7: Запрос несуществующего ресурса productId = {idinval}

Шаги: Выполнить GET /products/{idinval}/cost?authToken={token}&count=1&start=0

Ожидаемый результат: Статус **404** Not Found.

### TK8: Обработка некорректных входных данных

Шаги: Выполнить GET /products/{idinval}/cost?authToken={token}&count=**-1**&start=**"start"**

Ожидаемый результат: Статус 500, тело: {"errorMessage": "..."}.
